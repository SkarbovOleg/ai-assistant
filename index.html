<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–ò –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å OpenRouter</title>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --light: #f8fafc;
            --dark: #1e293b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--dark);
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 95vh;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        .header-content {
            position: relative;
            z-index: 1;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .api-status {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-top: 10px;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .sidebar {
            width: 300px;
            background: var(--light);
            padding: 25px;
            border-right: 1px solid #e2e8f0;
            overflow-y: auto;
        }
        
        .model-selector {
            margin-bottom: 30px;
        }
        
        .model-selector h3 {
            margin-bottom: 15px;
            color: var(--dark);
            font-size: 1.1rem;
        }
        
        .model-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .model-option {
            padding: 12px 16px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
        }
        
        .model-option:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .model-option.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .settings {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            border: 1px solid #e2e8f0;
        }
        
        .settings h3 {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .slider-container {
            margin-bottom: 20px;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .slider {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            background: #e2e8f0;
            border-radius: 3px;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
        }
        
        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 0;
        }
        
        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 25px;
            background: white;
        }
        
        .message {
            margin-bottom: 20px;
            display: flex;
            gap: 12px;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .ai-avatar {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
        }
        
        .user-avatar {
            background: #3b82f6;
            color: white;
        }
        
        .message-content {
            flex: 1;
        }
        
        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
            color: #64748b;
        }
        
        .message-text {
            background: #f1f5f9;
            padding: 16px;
            border-radius: 12px;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .user-message .message-text {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            margin-left: auto;
            max-width: 80%;
        }
        
        .ai-message .message-text {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            max-width: 90%;
        }
        
        .input-area {
            padding: 20px;
            border-top: 1px solid #e2e8f0;
            background: white;
        }
        
        .input-wrapper {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }
        
        #userInput {
            flex: 1;
            padding: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            resize: none;
            min-height: 60px;
            max-height: 120px;
            font-family: inherit;
            transition: all 0.3s;
        }
        
        #userInput:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        #sendButton {
            padding: 16px 24px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            height: 60px;
        }
        
        #sendButton:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(99, 102, 241, 0.3);
        }
        
        #sendButton:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .typing-indicator {
            display: none;
            padding: 20px;
            align-items: center;
            gap: 10px;
            color: #64748b;
        }
        
        .typing-dots {
            display: flex;
            gap: 4px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            animation: typingBounce 1.4s infinite ease-in-out both;
        }
        
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typingBounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        
        .quick-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .quick-btn {
            padding: 8px 16px;
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        
        .quick-btn:hover {
            background: #e2e8f0;
            transform: translateY(-1px);
        }
        
        .message-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .message:hover .message-actions {
            opacity: 1;
        }
        
        .action-btn {
            padding: 4px 12px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            color: #64748b;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            background: #f8fafc;
            color: var(--primary);
            border-color: var(--primary);
        }
        
        @media (max-width: 768px) {
            .container {
                height: auto;
                min-height: 100vh;
            }
            
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #e2e8f0;
            }
            
            .chat-container {
                padding: 15px;
            }
            
            .input-area {
                padding: 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1><i class="fas fa-robot"></i> –ò–ò –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</h1>
                <p class="subtitle">–ú–æ—â–Ω—ã–π AI –Ω–∞ –æ—Å–Ω–æ–≤–µ OpenRouter API</p>
                <div class="api-status">
                    <div class="status-dot"></div>
                    <span id="statusText">OpenRouter –ø–æ–¥–∫–ª—é—á–µ–Ω</span>
                </div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="sidebar">
                <div class="model-selector">
                    <h3><i class="fas fa-brain"></i> –í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å –ò–ò</h3>
                    <div class="model-options">
                        <div class="model-option active" onclick="selectModel('mistralai/mixtral-8x7b-instruct')">
                            Mixtral 8x7B (–õ—É—á—à–∞—è)
                        </div>
                        <div class="model-option" onclick="selectModel('google/gemini-pro')">
                            Gemini Pro (Google)
                        </div>
                        <div class="model-option" onclick="selectModel('openai/gpt-3.5-turbo')">
                            GPT-3.5 Turbo
                        </div>
                        <div class="model-option" onclick="selectModel('meta-llama/llama-2-70b-chat')">
                            Llama 2 70B
                        </div>
                        <div class="model-option" onclick="selectModel('microsoft/wizardlm-2-8x22b')">
                            WizardLM 8x22B
                        </div>
                    </div>
                </div>
                
                <div class="settings">
                    <h3><i class="fas fa-sliders-h"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: <span id="tempValue">0.7</span></span>
                            <small>–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ</small>
                        </div>
                        <input type="range" min="0" max="1" step="0.1" value="0.7" class="slider" id="temperature">
                    </div>
                    
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>–ú–∞–∫—Å. –¥–ª–∏–Ω–∞: <span id="maxTokensValue">1000</span></span>
                            <small>–¢–æ–∫–µ–Ω—ã</small>
                        </div>
                        <input type="range" min="100" max="4000" step="100" value="1000" class="slider" id="maxTokens">
                    </div>
                    
                    <div class="quick-actions">
                        <button class="quick-btn" onclick="clearChat()">
                            <i class="fas fa-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç
                        </button>
                        <button class="quick-btn" onclick="exportChat()">
                            <i class="fas fa-download"></i> –≠–∫—Å–ø–æ—Ä—Ç
                        </button>
                    </div>
                </div>
                
                <div class="quick-actions" style="margin-top: 20px;">
                    <h3><i class="fas fa-bolt"></i> –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã</h3>
                    <button class="quick-btn" onclick="insertPrompt('–ù–∞–ø–∏—à–∏ –ø–ª–∞–Ω –¥–ª—è —Å—Ç–∞—Ç—å–∏ –æ...')">–ü–ª–∞–Ω —Å—Ç–∞—Ç—å–∏</button>
                    <button class="quick-btn" onclick="insertPrompt('–û–±—ä—è—Å–Ω–∏ –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏...')">–û–±—ä—è—Å–Ω–∏ –ø—Ä–æ—Å—Ç–æ</button>
                    <button class="quick-btn" onclick="insertPrompt('–ù–∞–ø–∏—à–∏ –∫–æ–¥ –¥–ª—è...')">–ù–∞–ø–∏—à–∏ –∫–æ–¥</button>
                    <button class="quick-btn" onclick="insertPrompt('–ü–µ—Ä–µ–≤–µ–¥–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π: ')" style="margin-top: 5px;">–ü–µ—Ä–µ–≤–æ–¥</button>
                    <button class="quick-btn" onclick="insertPrompt('–ò—Å–ø—Ä–∞–≤—å –æ—à–∏–±–∫–∏ –≤ —Ç–µ–∫—Å—Ç–µ: ')" style="margin-top: 5px;">–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç</button>
                </div>
            </div>
            
            <div class="chat-area">
                <div class="chat-container" id="chatContainer">
                    <div class="message ai-message">
                        <div class="message-avatar ai-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-content">
                            <div class="message-header">
                                <span>–ò–ò –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</span>
                                <span>–¢–æ–ª—å–∫–æ —á—Ç–æ</span>
                            </div>
                            <div class="message-text">
                                –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –Ω–∞ –º–æ—â–Ω—ã—Ö –º–æ–¥–µ–ª—è—Ö —á–µ—Ä–µ–∑ OpenRouter. 
                                –í—ã –º–æ–∂–µ—Ç–µ:
                                
                                1. –ó–∞–¥–∞–≤–∞—Ç—å –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã
                                2. –ü—Ä–æ—Å–∏—Ç—å –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–µ–∫—Å—Ç –∏–ª–∏ –∫–æ–¥
                                3. –û–±—Å—É–∂–¥–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Ç–µ–º—ã
                                4. –ü–µ—Ä–µ–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç—ã
                                5. –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
                                
                                –í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å —Å–ª–µ–≤–∞ –∏ –Ω–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥! üòä
                            </div>
                            <div class="message-actions">
                                <button class="action-btn" onclick="copyMessage(this)">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="typing-indicator" id="typingIndicator">
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                    <span>–ò–ò –¥—É–º–∞–µ—Ç...</span>
                </div>
                
                <div class="input-area">
                    <div class="input-wrapper">
                        <textarea id="userInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å... (Shift+Enter –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)" rows="1"></textarea>
                        <button id="sendButton" onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                        </button>
                    </div>
                    <div class="quick-actions">
                        <button class="quick-btn" onclick="insertPrompt('–ù–∞–ø–∏—à–∏ —Ä–µ—Ü–µ–ø—Ç...')"><i class="fas fa-utensils"></i> –†–µ—Ü–µ–ø—Ç</button>
                        <button class="quick-btn" onclick="insertPrompt('–°–æ—Å—Ç–∞–≤—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É...')"><i class="fas fa-dumbbell"></i> –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</button>
                        <button class="quick-btn" onclick="insertPrompt('–ü—Ä–∏–¥—É–º–∞–π –±–∏–∑–Ω–µ—Å-–∏–¥–µ—é...')"><i class="fas fa-lightbulb"></i> –ò–¥–µ—è</button>
                        <button class="quick-btn" onclick="insertPrompt('–ù–∞–ø–∏—à–∏ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ –æ...')"><i class="fas fa-pen"></i> –°—Ç–∏—Ö–∏</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –í–∞—à –∫–ª—é—á OpenRouter - –í–°–¢–ê–í–¨–¢–ï –°–í–û–ô –ö–õ–Æ–ß –ó–î–ï–°–¨
        const OPENROUTER_API_KEY = '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';
        
        let currentModel = 'mistralai/mixtral-8x7b-instruct';
        let conversationHistory = [];
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();
            setupEventListeners();
            updateStatus('–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ');
        });
        
        function selectModel(model) {
            currentModel = model;
            document.querySelectorAll('.model-option').forEach(option => {
                option.classList.remove('active');
                if (option.onclick.toString().includes(model)) {
                    option.classList.add('active');
                }
            });
            updateStatus(`–í—ã–±—Ä–∞–Ω–∞ –º–æ–¥–µ–ª—å: ${model.split('/').pop()}`);
        }
        
        function setupEventListeners() {
            const userInput = document.getElementById('userInput');
            const sendButton = document.getElementById('sendButton');
            
            // –ê–≤—Ç–æ-–≤—ã—Å–æ—Ç–∞ textarea
            userInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
            });
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ Enter (Shift+Enter –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)
            userInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
    
